name: Linting Kubernetes ☸️
on:
 pull_request:
    branches:
    - '!main'
    paths: 
    - 'manifests/**.yaml'
    - 'manifests/**.yml'
    - 'bedrock/manifests/**.yaml'
    - 'bedrock/manifests/**.yml'
        
 workflow_dispatch:

jobs:
    k8s-lint:
      runs-on: ubuntu-latest
      steps:
        - uses: actions/checkout@v3

        - name: 'Yamllint'
          uses: kustomize-everything/action-yaml-linter@main
          with:
            yamllint_file_or_dir: './manifests'
            yamllint_strict: false
            yamllint_comment: true
          env:
            GITHUB_ACCESS_TOKEN: ${{ secrets.GITHUB_TOKEN }}